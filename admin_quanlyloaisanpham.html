<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Quản lý loại sản phẩm - Guitar Xì Gòn</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <!--Kiểm tra xem đã đăng nhập chưa-->
  <!-- <script>
        if (sessionStorage.getItem('admin_isLoggedIn') !== 'true') {
            window.location.href = 'admin_login.html';
        }
  </script> -->

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/drift-zoom/drift-basic.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
  <link href="assets/css/admin.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: NiceShop
  * Template URL: https://bootstrapmade.com/niceshop-bootstrap-ecommerce-template/
  * Updated: Aug 26 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="login-page">

  <header id="header" class="header sticky-top">


    <!-- Main Header -->
    <div class="main-header">
      <div class="container-fluid container-xl">
        <div class="d-flex py-3 align-items-center justify-content-between">

          <!-- Logo -->
          <a href="index.html" class="logo d-flex align-items-center">
            <!-- Uncomment the line below if you also wish to use an image logo -->
            <!-- <img src="assets/img/logo.webp" alt=""> -->
            <h1 class="sitename">Guitar Xì Gòn</h1>
          </a>
          <!-- Actions -->
          <div class="header-actions d-flex align-items-center justify-content-end">

            <!-- Mobile Search Toggle -->
            <button class="header-action-btn mobile-search-toggle d-xl-none" type="button" data-bs-toggle="collapse"
              data-bs-target="#mobileSearch" aria-expanded="false" aria-controls="mobileSearch">
              <i class="bi bi-search"></i>
            </button>

            <!-- Account -->
            <div class="dropdown account-dropdown">
              <button class="header-action-btn" data-bs-toggle="dropdown">
                <i class="bi bi-person"></i>
              </button>
              <div class="dropdown-menu">
                <div class="dropdown-header">
                  <h6>Tài khoản <span class="sitename">Admin</span></h6>
                  <p class="mb-0">quản lý sản phẩm &amp; khách hàng</p>
                </div>
                <div class="dropdown-body">
                  <a class="dropdown-item d-flex align-items-center" href="admin_account.html">
                    <i class="bi bi-person-circle me-2"></i>
                    <span>Hồ sơ admin</span>
                  </a>
                  <a class="dropdown-item d-flex align-items-center" href="admin_account.html#settings">
                    <i class="bi bi-gear me-2"></i>
                    <span>Cài đặt</span>
                  </a>
                </div>
                <div class="dropdown-footer">
                  <a href="admin_login.html" class="btn btn-outline-primary w-100" id="admin-logout-button">Đăng
                    xuất</a>
                </div>
              </div>
            </div>

            <!-- Mobile Navigation Toggle -->
            <i class="mobile-nav-toggle d-xl-none bi bi-list me-0"></i>

          </div>
        </div>

      </div>
    </div>
    </div>
    </div>

    <!-- Navigation -->
    <div class="header-nav">
      <div class="container-fluid container-xl position-relative">
        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="admin_quanlykhachhang.html">Quản lý khách hàng</a></li>
            <li><a href="admin_quanlyloaisanpham.html">Quản lý loại sản phẩm</a></li>
            <li><a href="admin_danhmucsanpham.html">Quản lý danh mục sản phẩm</a></li>
            <li><a href="admin_quanlynhapsanpham.html">Quản lý nhập sản phẩm</a></li>
            <li><a href="admin_quanlydonhang.html">Quản lý đơn hàng</a></li>
            <li><a href="admin_quanlytonkho.html">Quản lý tồn kho</a></li>
          </ul>
        </nav>
      </div>
    </div>

    <!-- Mobile Search Form -->
    <div class="collapse" id="mobileSearch">
      <div class="container">
        <form class="search-form">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Tìm kiếm sản phẩm">
            <button class="btn" type="submit">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </form>
      </div>
    </div>

  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">Quản lý loại sản phẩm</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="admin.html">Trang chủ</a></li>
            <li class="current">Quản lý loại sản phẩm</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->



    <div class="container-manage-category-products">
      <h2 style="margin: 20px 0px;">Thêm Loại Sản Phẩm Mới</h2>
      <div class="add-form-category-products">
        <input type="text" id="newCategoryName" style="flex-grow: 1;"
          placeholder="Tên Loại Sản Phẩm (ví dụ: Guitar Acoustic)">
        <input type="text" id="" style="width: 120px;" placeholder="Lợi nhuận(%)">
        <input type="text" id="newCategoryDescription" style="flex-grow: 1;" placeholder="Mô tả (Tùy chọn)">
        <button onclick="addNewCategory()">Thêm mới</button>
      </div>

      <h2>Danh Sách Loại Sản Phẩm</h2>
      <table class="data-table">
        <thead>
          <tr>
            <th style="width: 5%;">ID</th>
            <th style="width: 17%;">Tên Loại</th>
            <th sytle="width: 13%;">% Lợi nhuận</th>
            <th style="width: 40%;">Mô tả</th>
            <th style="width: 25%;">Chức năng</th>
          </tr>
        </thead>
        <tbody id="categoryList">
          <tr>
            <td>1</td>
            <td class="manage-name-category">Guitar Acoustic</td>
            <td>25%</td>
            <td>Dòng guitar thùng sử dụng dây kim loại.</td>
            <td class="function-button-container">
              <button class="edit-btn action-icon-btn" title="Sửa"><img src="assets/img/iconbutton/pencil.png"
                  class="button-icon" alt="Sửa"></button>
              <button class="delete-btn action-icon-btn" title="Xoá"><img src="assets/img/iconbutton/trash.png"
                  class="button-icon" alt="Xoá"></button>
              <button class="hide-btn action-icon-btn" title="Ẩn"><img src="assets/img/iconbutton/eye.png"
                  class="button-icon" alt="Ẩn"></button>
              <button class="manage-brands-btn action-icon-btn" title="Quản lý thương hiệu"><img
                  src="assets/img/iconbutton/settings-sliders.png" class="button-icon"
                  alt="Quản lý thương hiệu"></button>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td class="manage-name-category">Guitar Classic</td>
            <td>30%</td>
            <td>Dòng guitar thùng sử dụng dây nylon.</td>
            <td class="function-button-container">
              <button class="edit-btn action-icon-btn" title="Sửa"><img src="assets/img/iconbutton/pencil.png"
                  class="button-icon" alt="Sửa"></button>
              <button class="delete-btn action-icon-btn" title="Xoá"><img src="assets/img/iconbutton/trash.png"
                  class="button-icon" alt="Xoá"></button>
              <button class="hide-btn action-icon-btn" title="Ẩn"><img src="assets/img/iconbutton/eye.png"
                  class="button-icon" alt="Ẩn"></button>
              <button class="manage-brands-btn action-icon-btn" title="Quản lý thương hiệu"><img
                  src="assets/img/iconbutton/settings-sliders.png" class="button-icon"
                  alt="Quản lý thương hiệu"></button>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- Pop up chỉnh sửa phân loại -->
      <div id="edit-info-category" class="modal">
        <div class="modal-content-admin">
          <span class="close-button-for-edit-info-category">&times;</span>
          <h1>Chỉnh sửa phân loại: </h1>
          <h3>Tên loại: <input id="input-edit-namecategory" type="text" value=""></h3>

          <hr>
          <h3>% Lợi nhuận: <input id="input-edit-profitcategory" type="number" min="0" max="100" style="width: 70px;">
          </h3>

          <hr>
          <h3>Mô tả</h3>
          <textarea id="mo_ta" name="product_description" rows="4" cols="50"
            placeholder="Nhập mô tả chi tiết sản phẩm ở đây..."></textarea>

          <div id="close-edit-category-container">
            <button class="close-button-for-edit-category-container">Lưu</button>
          </div>
        </div>
      </div>


      <!-- Pop up quản lý thương hiệu -->
      <div id="DetailModal" class="modal">
        <div class="modal-content-admin">
          <span class="close-button">&times;</span>
          <h1 id="modalCategory"></h1> <!-- Chỗ này hiện xem coi nó là acoustic hay classic bằng JS-->
          <div id="brandList">
            <h3>Danh sách thương hiệu hiện có:</h3>
            <ul id="brandsUlList"></ul> <!-- Chỗ này dùng JavaScript để hiện danh sách -->
          </div>

          <hr>
          <div id="addBrandForm">
            <h3>Thêm Thương hiệu mới:</h3>
            <input type="text" id="newBrandName" placeholder="Tên thương hiệu">
            <button id="addBrandBtn">Thêm</button>
          </div>

        </div>


      </div>



    </div>






  </main>

  <footer id="footer" class="footer dark-background">
    <div class="footer-main">
      <div class="container">
        <div class="row gy-4">
          <div class="col-lg-4 col-md-6">
            <div class="footer-widget footer-about">
              <a href="index.html" class="logo">
                <span class="sitename">Guitar Xì Gòn</span>
              </a>
              <p>Guitar Xì Gòn là nhà phân phối nhạc cụ guitar, thiết bị guitar chuyên nghiệp hàng đầu tại Việt Nam.</p>

              <div class="social-links mt-4">
                <h5>Kết nối với chúng tôi</h5>
                <div class="social-icons">
                  <a href="#" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
                  <a href="#" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
                  <a href="#" aria-label="Twitter"><i class="bi bi-twitter-x"></i></a>
                  <a href="#" aria-label="TikTok"><i class="bi bi-tiktok"></i></a>
                  <a href="#" aria-label="Pinterest"><i class="bi bi-pinterest"></i></a>
                  <a href="#" aria-label="YouTube"><i class="bi bi-youtube"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-2 col-md-6 col-sm-6">
            <div class="footer-widget">
              <h4>Sản phẩm</h4>
              <ul class="footer-links">
                <li><a href="all.html">Sản phẩm mới</a></li>
                <li><a href="all.html">Đang bán chạy</a></li>
                <li><a href="all.html">Guitar classic</a></li>
                <li><a href="all.html">Guitar acoustic</a></li>
                <li><a href="all.html">Đang khuyến mãi</a></li>
              </ul>
            </div>
          </div>

          <div class="col-lg-2 col-md-6 col-sm-6">
            <div class="footer-widget">
              <h4>Hỗ trợ</h4>
              <ul class="footer-links">
                <li><a href="support.html">Trung tâm hỗ trợ</a></li>
                <li><a href="account.html">Trạng thái đặt hàng</a></li>
                <li><a href="shiping-info.html">Thông tin giao hàng</a></li>
                <li><a href="return-policy.html">Yêu cầu trả hàng</a></li>
                <li><a href="#">Size Guide</a></li>
                <li><a href="contact.html">Liên hệ với chúng tôi</a></li>
              </ul>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <div class="footer-widget">
              <h4>Thông tin liên hệ</h4>
              <div class="footer-contact">
                <div class="contact-item">
                  <i class="bi bi-geo-alt"></i>
                  <span> 273 An Dương Vương, Phường, Chợ Quán, Hồ Chí Minh 700000</span>
                </div>
                <div class="contact-item">
                  <i class="bi bi-telephone"></i>
                  <span>0123456789</span>
                </div>
                <div class="contact-item">
                  <i class="bi bi-envelope"></i>
                  <span>guitarxigon@gmail.com</span>
                </div>
                <div class="contact-item">
                  <i class="bi bi-clock"></i>
                  <span>Thứ 2 - Chủ Nhật: 6h-23h<br>Ngày lễ: Đóng cửa</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <div class="row gy-3 align-items-center">
          <div class="col-lg-6 col-md-12">
            <div class="copyright">
              <p>© <span>Copyright</span> <strong class="sitename">Guitar Xì Gòn</strong>. All Rights Reserved.</p>
            </div>
            <div class="credits mt-1">
              Designed by <span>Quốc Huy - Hồng Nhân - Xuân Tâm</span>
            </div>
          </div>
          <div class="col-lg-6 col-md-12">
            <div class="d-flex flex-wrap justify-content-lg-end justify-content-center align-items-center gap-4">
              <div class="payment-methods">
                <div class="payment-icons">
                  <i class="bi bi-credit-card" aria-label="Credit Card"></i>
                  <i class="bi bi-paypal" aria-label="PayPal"></i>
                  <i class="bi bi-apple" aria-label="Apple Pay"></i>
                  <i class="bi bi-google" aria-label="Google Pay"></i>
                  <i class="bi bi-shop" aria-label="Shop Pay"></i>
                  <i class="bi bi-cash" aria-label="Cash on Delivery"></i>
                </div>
              </div>
              <div class="legal-links">
                <a href="tos.html">Terms</a>
                <a href="privacy.html">Privacy</a>
                <a href="tos.html">Cookies</a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/drift-zoom/Drift.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- <script src="assets/js/login.js"></script> -->
  <script src="assets/js/admin.js"></script>
</body>
<!-- Xử lý nếu đăng xuát xoá local storage -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Toàn bộ code bên trong sẽ chỉ chạy sau khi DOM đã được tải hoàn toàn

    // 1. Lấy ra phần tử nút Đăng xuất
    const logoutButton = document.getElementById('admin-logout-button');

    // 2. Thêm trình lắng nghe sự kiện khi nhấp chuột
    if (logoutButton) { // Thêm kiểm tra an toàn
      logoutButton.addEventListener('click', function (event) {
        event.preventDefault(); // Ngăn hành vi mặc định của liên kết/nút

        // 3. XÓA TRẠNG THÁI ĐĂNG NHẬP KHỎI LOCALSTORAGE
        localStorage.removeItem('admin_isLoggedIn');

        // 4. CHUYỂN HƯỚNG người dùng về trang đăng nhập
        window.location.href = 'admin_login.html';
      });
    }
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // 1. Lấy tất cả các nút có class 'hide-btn'
    const hideButtons = document.querySelectorAll('.hide-btn');

    // Đường dẫn tới ảnh con mắt không gạch chéo (Ẩn)
    const eyeIconSrc = 'assets/img/iconbutton/eye.png';
    // Đường dẫn tới ảnh con mắt gạch chéo (Hiện)
    const eyeCrossedIconSrc = 'assets/img/iconbutton/eye-crossed.png';

    // 2. Lặp qua từng nút và thêm trình lắng nghe sự kiện
    hideButtons.forEach(button => {
      button.addEventListener('click', function () {
        // Lấy thẻ <img> bên trong nút được nhấn
        const icon = button.querySelector('.button-icon');
        // Lấy tên loại sản phẩm từ cột bên cạnh
        const row = button.closest('tr');
        const categoryName = row.querySelector('.manage-name-category').textContent;

        let newStateTitle = '';
        let alertMessage = '';

        // 3. Kiểm tra trạng thái hiện tại và xác định trạng thái mới
        if (button.title === 'Ẩn') {
          // Đổi sang trạng thái "Hiện" (tức là Ẩn sản phẩm)
          icon.src = eyeCrossedIconSrc;
          icon.alt = 'Hiện';
          newStateTitle = 'Hiện';
          alertMessage = `Đã ẩn loại sản phẩm: ${categoryName}`;

        } else if (button.title === 'Hiện') {
          // Đổi về trạng thái "Ẩn" (tức là Hiện sản phẩm)
          icon.src = eyeIconSrc;
          icon.alt = 'Ẩn';
          newStateTitle = 'Ẩn';
          alertMessage = `Đã hiện loại sản phẩm: ${categoryName}`;
        }

        // 4. Cập nhật thuộc tính title của nút
        button.title = newStateTitle;

        // 5. Hiển thị thông báo SweetAlert2
        if (alertMessage) {
          Swal.fire({
            icon: 'success', // Hoặc 'info', 'warning' tùy ý
            title: 'Cập nhật thành công!',
            html: alertMessage, // Dùng html để in đậm
            timer: 1200, // Tự động đóng sau 2 giây
            showConfirmButton: false
          });
        }
      });


      //Hiệu ứng cho nút xoá
      // 1. Lấy tất cả các nút có class 'delete-btn'
      const deleteButtons = document.querySelectorAll('.delete-btn');

      // 2. Lặp qua từng nút và thêm trình lắng nghe sự kiện
      deleteButtons.forEach(button => {
        button.addEventListener('click', function () {
          // Lấy tên loại sản phẩm từ cột bên cạnh
          const row = button.closest('tr');
          const categoryName = row.querySelector('.manage-name-category').textContent;

          // 3. Hiển thị thông báo xác nhận xóa (Confirm Dialog)
          Swal.fire({
            title: 'Bạn có chắc chắn muốn xóa?',
            html: `Loại sản phẩm: ${categoryName} sẽ bị xóa vĩnh viễn.`,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33', // Màu đỏ cho nút Xóa
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Có, xóa nó!',
            cancelButtonText: 'Hủy'
          }).then((result) => {
            // 4. Xử lý kết quả sau khi người dùng nhấn nút
            if (result.isConfirmed) {
              // *** THÊM LOGIC XÓA THỰC TẾ Ở ĐÂY (gọi API xóa, v.v.) ***

              // Ví dụ: Xóa hàng khỏi bảng (chỉ là giao diện)
              // row.remove(); 

              // 5. Hiển thị thông báo xóa thành công
              Swal.fire({
                icon: 'success',
                title: 'Đã Xóa!',
                html: `Loại sản phẩm ${categoryName} đã được xóa.`,
                timer: 2000,
                showConfirmButton: false
              });
            } else if (result.dismiss === Swal.DismissReason.cancel) {
              // Người dùng đã nhấn nút Hủy
              Swal.fire({
                icon: 'info',
                title: 'Đã hủy',
                text: 'Loại sản phẩm vẫn an toàn.',
                timer: 1500,
                showConfirmButton: false
              });
            }
          });
        });
      });
    });
  });

  /**
   * Hàm xử lý logic khi nhấn nút 'Thêm mới' loại sản phẩm
   * (Phiên bản đơn giản: Hiển thị thông báo ngay lập tức mà không cần kiểm tra input)
   */
  function addNewCategory() {
    // 1. Lấy tên loại sản phẩm (dù có thể rỗng, nhưng vẫn lấy để đưa vào thông báo)
    const newCategoryNameInput = document.getElementById('newCategoryName');
    const name = newCategoryNameInput.value.trim() || 'Sản phẩm không tên'; // Nếu rỗng thì đặt tên mặc định

    // 2. *** Bỏ qua logic kiểm tra dữ liệu và logic thêm vào hệ thống ***

    // 3. Hiển thị thông báo thêm thành công bằng SweetAlert2
    Swal.fire({
      icon: 'success',
      title: 'Đã thêm thành công!',
      // html: `Đã thêm loại sản phẩm mới: <strong>${name}</strong>.`,
      timer: 1200,
      showConfirmButton: false
    });

    // 4. Xóa dữ liệu đã nhập sau khi thông báo
    newCategoryNameInput.value = '';

    // Xóa các input khác
    document.querySelector('.add-form-category-products input[placeholder="Lợi nhuận(%)"]').value = '';
    document.getElementById('newCategoryDescription').value = '';
  }

</script>

</html>